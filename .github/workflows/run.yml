name: Run double-slit simulation

on:
push:
branches: [ "main" ]
workflow_dispatch:

jobs:
build:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v4

- uses: actions/setup-python@v5
with:
python-version: "3.11"

- name: Install dependencies
run: |
python -m pip install --upgrade pip
pip install -r requirements.txt

- name: Run simulation
env:
MPLBACKEND: Agg
run: |
python simulate_double_slit.py
ls -R

- name: Upload artifacts
uses: actions/upload-artifact@v4
with:
name: outputs
path: |
data/results.csv
figs/pattern.png
if-no-files-found: error
